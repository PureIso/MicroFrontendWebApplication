server {
    listen 4201;
    server_name remote;

    # Serve the main application (index.html)
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;  # Ensure static files are correctly served
    }

    # Serve JavaScript files with the correct MIME type (single setting)
    location ~* \.js$ {
        root /usr/share/nginx/html;
        default_type application/javascript;
        try_files $uri =404;
        add_header Access-Control-Allow-Origin "*";
    }

    # Serve hashed CSS files
    location ~* \.css$ {
        root /usr/share/nginx/html;
        default_type text/css;
        try_files $uri =404;  # Ensure the file exists
        add_header Access-Control-Allow-Origin "*";
    }

    # Serve the remoteEntry.json with the correct MIME type
    location /remoteEntry.json {
        root /usr/share/nginx/html;
        default_type application/json;
        try_files $uri =404;
        add_header Access-Control-Allow-Origin "*";
    }
    location ~* \.json$ {
        root /usr/share/nginx/html;
        default_type application/json;
        try_files $uri =404;  # Ensure the file exists
        add_header Access-Control-Allow-Origin "*";
    }

    # Serve other static assets with correct MIME types
    location ~* \.(html|woff2)$ {
        root /usr/share/nginx/html;
        try_files $uri =404;
        add_header Access-Control-Allow-Origin "*";
    }

    # Global CORS headers
    add_header Access-Control-Allow-Origin "*";
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
    add_header Access-Control-Allow-Headers "Origin, Content-Type, Accept";
}
